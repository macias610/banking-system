<div class="panel-header panel-header-sm">
</div>
<div class="main-content">
  <div class="row">
    <div class="col-md-12">
      <div class="card">
        <div class="card-header">
          <h4 class="card-title">Active direct debit agreements</h4>
          <div class="row">
            <div class="col-md-4">
              <div class="form-group">
                <input type="text" class="form-control" [ngbTypeahead]="searchClient"
                  [resultFormatter]="searchClientFormat" [inputFormatter]="searchClientFormat"
                  (selectItem)="selectClient($event.item.id)" placeholder="Search client ..." value="">
              </div>
            </div>
            <div class="col-md-5"></div>
            <div class="col-md-3">
              <div class="form-group" align="right">
                <input type="text" value="" (input)="searchInTable($event.target.value)" placeholder="Search data"
                  class="form-control" />
              </div>
            </div>
          </div>
        </div>
        <div class="card-body">
          <div class="table">
            <table class="table" *ngIf="(directDebits | async) as directDebits; else noResultsDirectDebit">
              <thead class=" text-primary">
                <th>
                  Account number
                </th>
                <th>
                  Provider
                </th>
                <th>
                  status
                </th>
                <th class="text-right">
                  Operations
                </th>
              </thead>
              <tbody *ngIf="directDebits.length > 0">
                <tr *ngFor="let debit of directDebits | customFilter: directDebitsFilter : searchString">
                  <td>
                    {{ debit.clientAccNumber }}
                  </td>
                  <td>
                    {{ debit.providerName }}
                  </td>
                  <td>
                    {{debit.enabled?'enabled':'disabled'}}
                  </td>
                  <td class="text-right">
                    <button class="btn btn-sm btn-danger" (click)="cancelDirectDebit(debit)"
                      *ngIf="debit.enabled">disable </button>
                  </td>
                </tr>
              </tbody>
              <tbody *ngIf="directDebits.length === 0">
                <tr>
                  <td colspan="4">
                    No results
                  </td>
                </tr>
              </tbody>
            </table>

          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<ng-template #noResultsDirectDebit>
  <table class="table">
    <thead class=" text-primary">
      <th>
        Account number
      </th>
      <th>
        Provider
      </th>
      <th>
        status
      </th>
      <th class="text-right">
        Operations
      </th>
    </thead>
    <tbody>
      <tr>
        <td colspan="4">
          No results
        </td>
      </tr>
    </tbody>
  </table>
</ng-template>
